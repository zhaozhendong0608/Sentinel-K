---
description: 🛡️ [Execution] 哨兵模式与受控执行 (Atomic Execution & Sentry) - **核心流程**
---

# 🛡️ 03_受控执行 (Execution Sentry V2.0)

> **定位**: 核心生产环节。
> **目的**: 通过 **Evidence Block** 和 **Reverse Testing** 强制物理验证，消除“口头绿灯”。
> **V2升级**: 集成 `Reverse Testing` (反向测试) 与标准证据块交付。

## Node A: 范围锁定与 Pack 加载 (Scope & Pack)

**指令**:
1.  锁定当前 Task 的 `Scope` (严禁越界修改)。
2.  **原子化加载 `Pack-2` (Execution) `[K-BOOT]`**:
    - **仅加载**：由 `/02_需求雷达` 识别的目标修改文件（Target Files）。
    - **检索**：直接相关的 Interface/DTO，严禁全量装载整个模块目录。
    - **引用**：涉及的 `03_决策日志 (ADR)` 条目。

## Node B: 原子执行 (Atomic Execution)

**执行原则 (Sentry Iron Rules)**:
1.  **Patch-First**: 先输出 Diff 预览，后 Apply。
2.  **Test-First**: 对于核心逻辑，先写 Test (Red) 再写 Impl (Green)。
3.  **Reverse_Proof**: 核心算法/安全逻辑必须执行“破坏性证明” `[K-TEST]`。
4.  **Solid 保护**:
    - 触碰 `Solid-Strict` -> 必须具备 `Approval_Hash`，并在 Evidence 中提供 `ADR_Entry` + `Asset_Update`。
    - 触碰 `Solid-Regulated` -> 必须在 Evidence 中提供 `ADR_Entry` + `Asset_Update`。

## Node C: 产出证据 (Generate Evidence)

**交付物必须包含标准 Evidence Block (可复制)**:

```markdown
### 📦 Context Evidence `[K-EVIDENCE]`
- **Compliance_Status**: 🟢 [Pass] | ⚠️ [Warning] | 🔴 [Partial]
- **Context_Log**: [Pack-0 + Pack-X]
- **Diff_Summary**: [文件列表 + 关键逻辑变更摘要]
- **Test_Run**: `[TEST_RUNNER]` -> [Pass/Fail]
- **Scan_Result**: `[SCAN_RUNNER]` -> [Blocker Count]
- **Reverse_Proof**: (若涉及)
  - Position: [Symbol]
  - Action: [故意破坏动作]
  - Error: [预期红灯报错]
  - Recover: [恢复后绿灯]
- **Asset_Update**: [Solid-Strict/Regulated 变更留痕 | Liquid-only: NO_CHANGE]
- **ADR_Entry**: [ADR-ID -> Decision Point Review | Liquid-only: N/A]
```

## Node D: 决策点 (Decision Point)

向用户汇报：
> "指挥官，Task 执行完毕。
> *   Evidence: [完整/缺失]
> *   Reverse_Proof: [通过/跳过]
> *   Solid 触碰: [无/有]
>
> 请输入 **ACK** 确认合并证据，或 **Reject** 打回重写。"
